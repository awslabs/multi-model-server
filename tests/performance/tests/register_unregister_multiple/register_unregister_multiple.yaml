---
scenarios:
  scenario_0:
    script: register_unregister_multiple.jmx

services:
  - module: shellexec
    prepare:
      - "curl -s -X POST http://localhost:8081/models?url=${RESNET_URL}"


~reporting:
- module: passfail # this is to enable passfail module
- module: junit-xml
  data-source: pass-fail
- module: junit-xml
  data-source: sample-labels
- module: final-stats
  dump-csv : ${ARTIFACTS_DIR}/final_stats.csv
- module: passfail
  criteria:
    # Inbuilt Criteria
    - success of ${API_LABEL}<${API_SUCCESS} for 10s, ${STOP_ALIAS} as failed
    - avg-rt of ${API_LABEL}>${API_AVG_RT} for 10s, ${STOP_ALIAS} as failed
    - success of ScaleUp<${SCL_UP_SUCC} for 10s, ${STOP_ALIAS} as failed
    - success of UnregisterModel<${UNREG_SUCC} for 10s, ${STOP_ALIAS} as failed
    - avg-rt of ScaleUp>${SCL_UP_RT} for 10s, ${STOP_ALIAS} as failed
    - avg-rt of UnregisterModel>${UNREG_RT} for 10s, ${STOP_ALIAS} as failed
