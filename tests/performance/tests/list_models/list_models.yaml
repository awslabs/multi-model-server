---
scenarios:
  scenario_0:
    script: list_models.jmx

services:
  - module: shellexec
    prepare:
      - "curl -s -X POST http://localhost:8081/models?url=https://s3.amazonaws.com/model-server/model_archive_1.0/squeezenet_v1.1.mar"
      - "curl -s -X POST http://localhost:8081/models?url=https://s3.amazonaws.com/model-server/model_archive_1.0/shufflenet.mar"

reporting:
- module: passfail
  criteria:
    - class: bzt.modules.monitoring.MonitoringCriteria
      subject: ServerLocalClient/total_processes
      condition: '<'
      threshold: ${TOTAL_PROCS}
      timeframe: 5s
      stop : {STOP}
      fail : true
